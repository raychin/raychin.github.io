(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{168:function(t,e,r){"use strict";r.r(e);var a=r(183);for(var i in a)["default"].indexOf(i)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(i);var n=r(19),o=Object(n.a)(a.default,void 0,void 0,!1,null,null,null);o.options.__file="src/pages/map/components/districtLayer.vue",e.default=o.exports},183:function(t,e,r){"use strict";r.r(e);var a=r(184),i=r.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(n);e.default=i.a},184:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i,n=m(r(73)),o=m(r(181)),u=m(r(182)),s=m(r(174)),c=m(r(191)),d=m(r(192)),l=r(193),p=r(194),f=r(175);function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:"districtLayer",mixins:[l.getMap,p.dataMixins],props:{regionZoom:{type:Number,default:9},streetZoom:{type:Number,default:13},coummunityZoom:{type:Number,default:15},gridZoom:{type:Number,default:17},showMinZoom:{type:Number,default:9},defaultLineSymbol:{type:Object,default:function(){return{"line-color":"#FF8C00","line-width":3}}},defaultSymbol:{type:Object,default:function(){return{"fill-color":"#FFDEAD","fill-opacity":0}}}},mounted:function(){this.layer=this.initLayer(),this.clear(),this.initDistrict(),this.addViewChange()},methods:{initLayer:function(){var t="districtLayer";return this.map.getLayer(t)||(this.map.addSource(t+"Source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:t+"-line",type:"line",source:t+"Source",layout:{},paint:(0,s.default)({},this.defaultLineSymbol)}),this.map.addLayer({id:t,type:"fill",source:t+"Source",layout:{},paint:(0,s.default)({},this.defaultSymbol)})),this.map.getLayer(t)},initDistrict:(i=(0,u.default)(o.default.mark((function t(){var e,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.map.getZoom()>=this.$props.showMinZoom)){t.next=6;break}return t.next=4,this.getDistrict();case 4:(e=t.sent)&&e.length&&(r=this.geojsonToGeo(e),this.renderGeo(r,!1));case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),addViewChange:function(){var t=this;this.map.on("moveend",(0,u.default)(o.default.mark((function e(){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.map.getZoom()>=t.$props.showMinZoom)){e.next=8;break}return e.next=4,t.getDistrict();case 4:(r=e.sent)&&r.length&&(a=t.geojsonToGeo(r),t.renderGeo(a,!1)),e.next=9;break;case 8:t.clear();case 9:case"end":return e.stop()}}),e,t)}))))},addLayerClick:function(){var t=this;this.map.on("click","districtLayer",(function(e){t.$emit("click",e)}))},getDistrict:(a=(0,u.default)(o.default.mark((function t(){var e,r,a,i,u,s,l,p,m,h,y;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.map.getBounds(),r=[[e.getWest(),e.getNorth()],[e.getEast(),e.getSouth()]],a=1,(i=this.map.getZoom())>=this.$props.gridZoom?a=4:i>=this.$props.coummunityZoom?a=3:i<=this.$props.streetZoom?a=2:i>=this.$props.regionZoom&&(a=1),u=d.default.getViewAreaByBuilding,s=u.url,l=u.request_type,t.prev=6,t.next=9,c.default.Ajax(""+f.blockUrl+s,{request_type:l,paramCodeList:"KJ5003",paramType:a,coordinates:(0,n.default)(r)});case 9:if(p=t.sent,m=p.data,h=m.retCode,y=m.data,"00000"!==h){t.next=15;break}return t.abrupt("return",y);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),this.clear();case 20:case"end":return t.stop()}}),t,this,[[6,17]])}))),function(){return a.apply(this,arguments)}),clear:function(){this.map.getSource(this.layer.id+"Source").setData({type:"FeatureCollection",features:[]})}}}}}]);