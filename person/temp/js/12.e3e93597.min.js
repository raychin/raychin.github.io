(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{170:function(e,t,a){"use strict";a.r(t);var r=a(188);for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var o=a(19),i=Object(o.a)(r.default,void 0,void 0,!1,null,null,null);i.options.__file="src/pages/map/components/operateLayer.vue",t.default=i.exports},188:function(e,t,a){"use strict";a.r(t);var r=a(189),n=a.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(o);t.default=n.a},189:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n,o=p(a(181)),i=p(a(182)),u=p(a(174)),s=p(a(191)),c=p(a(192)),l=a(193),f=a(194),d=a(175);function p(e){return e&&e.__esModule?e:{default:e}}t.default={name:"operateLayer",mixins:[l.getMap,f.dataMixins],props:{showMinZoom:{type:Number,default:3},defaultLineSymbol:{type:Object,default:function(){return{"line-color":"#ff4500","line-width":3}}},defaultSymbol:{type:Object,default:function(){return{"fill-color":"#ff0000","fill-opacity":0}}}},mounted:function(){this.layer=this.initLayer(),this.clear(),this.initOperate()},methods:{initLayer:function(){var e="operateLayer";return this.map.getLayer(e)||(this.map.addSource(e+"Source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:e+"-line",type:"line",source:e+"Source",layout:{},paint:(0,u.default)({},this.defaultLineSymbol)}),this.map.addLayer({id:e,type:"fill",source:e+"Source",layout:{},paint:(0,u.default)({},this.defaultSymbol)})),this.map.getLayer(e)},initOperate:(n=(0,i.default)(o.default.mark((function e(){var t,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.map.getZoom()>=this.$props.showMinZoom)){e.next=6;break}return e.next=4,this.getOperateArea();case 4:(t=e.sent)&&t.length&&(a=this.geojsonToGeo(t),this.renderGeo(a,!1));case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),addViewChange:function(){var e=this;this.map.on("moveend",(0,i.default)(o.default.mark((function t(){var a,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.map.getZoom()>=e.$props.showMinZoom)){t.next=8;break}return t.next=4,e.getOperateArea();case 4:(a=t.sent)&&a.length&&(r=e.geojsonToGeo(a),e.renderGeo(r,!1)),t.next=9;break;case 8:e.clear();case 9:case"end":return t.stop()}}),t,e)}))))},addLayerClick:function(){var e=this;this.map.on("click","operateLayer",(function(t){e.$emit("click",t)}))},getOperateArea:(r=(0,i.default)(o.default.mark((function e(){var t,a,r,n,i,u,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.default.getAreaInfoByAreaCode,a=t.url,r=t.request_type,e.prev=2,e.next=5,s.default.Ajax(""+d.blockUrl+a,{request_type:r,paramCodeList:"KJ5002",areaCode:"440305"});case 5:if(n=e.sent,i=n.data,u=i.retCode,l=i.data,"00000"!==u){e.next=11;break}return e.abrupt("return",l.list);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0),this.clear();case 17:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(){return r.apply(this,arguments)}),clear:function(){this.map.getSource(this.layer.id+"Source").setData({type:"FeatureCollection",features:[]})}}}}}]);